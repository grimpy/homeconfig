#!/bin/bash
CONFIG=~/.config/xautolock
option=$1

function lock() {
    echo "KILLAGENT" | gpg-connect-agent
    if [ -n "$WAYLAND_DISPLAY" ]; then
        swaylock -c 333333 -F
    else
        i3lock -c 333333
    fi
}

case $option in
    enable)
        touch $CONFIG
        ;;
    disable)
        rm $CONFIG
        ;;
    force)
        lock
        ;;
    toggle)
        if [ -e "$CONFIG" ]; then
            rm $CONFIG
            echo "DISABLED"
        else
            touch $CONFIG
            echo "ENABLED"
        fi
        ;;
    *)
        if [ -e "$CONFIG" ]; then
            lock
        fi
        ;;
esac
